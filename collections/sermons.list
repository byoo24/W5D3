
{.var @currentCategory categoryFilter}
{.var @sermonsUrl fullUrl}

{.if collection.categories}
    <div class="cat-index">
        <ul class="cat-index-wrap">
            <li class="cat-item">
                <a href="{@sermonsUrl}" {.equal? @ @currentCategory}class="active"{.end}>{@}</a>
            </li>
            {.repeated section collection.categories}
                <li class="cat-item">
                    <a href="{@sermonsUrl}?category={@}" {.equal? @ @currentCategory}class="active"{.end}>{@}</a>
                </li>
            {.end}
        </ul>
    </div>
{.end}

{.repeated section items}
    <article id="sermons-{id}" class="sermons-index-item {@|item-classes}" data-item-id="{id}">
        <header class="sermons-header">
            <h1 class="sermons-title">{title}</h1>
            <squarespace:category collection="{urlId}">
                {.if categories}
                <div class="category-wrapper">
                    <span class="category">
                        {.repeated section categories}
                            <a href="{@sermonsUrl}?category={name}">{name}</a>
                        {.alternates with}, 
                        {.end}
                    </span>
                </div>
                {.end}
            </squarespace:category>

            {#  {.if categories}
                <ul class="sermons-cat-index">
                    {.repeated section categories}
                        <li class="sermons-cat-item">
                            <a href="{@sermonsUrl}?category={@}">{@}</a>
                        </li>
                    {.end}
                </ul>
            {.end}  }
        </header>
        <div class="sermons-content">
            {.excerpt?}
                <div class="sermons-excerpt">{excerpt}</div>
            {.or}
                {.section body}
                    <div class="sermons-body">{@}</div>
                {.end}
            {.end}
        </div>
    </article>
{.end}

{.if pagination}
    <nav class="pagination clear" data-paginate="scroll">
        {.if pagination.prevPage}<div class="newer"><a href="{pagination.prevPageUrl}" rel="prev"><span class="prev-label">Newer Posts</span></a></div>{.end}
        {.if pagination.nextPage}<div class="older"><a href="{pagination.nextPageUrl}" rel="next"><span class="next-label">Older Posts</span></a></div>{.end}
    </nav>
{.end}